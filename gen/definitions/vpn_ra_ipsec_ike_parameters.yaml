---
name: VPN RA IPSec IKE Parameters
rest_endpoint: /api/fmc_config/v1/domain/{DOMAIN_UUID}/policy/ravpns/%v/ipsecadvancedsettings
res_description: This resource manages FTD Remote Access (RA) Virtual Private Networks (VPNs) IPSec/IKEv2 Parameters.
put_create: true
retrieve_id: true
no_delete: true
adjust_body: true
skip_test: true
doc_category: VPN
attributes:
  - tf_name: vpn_ra_id
    type: String
    reference: true
    description: Id of the parent VPN RA Configuration.
    example: 76d24097-41c4-4558-a4d0-a8c07ac08470
  - model_name: type
    type: String
    description: Type of the object; this value is always 'RaVpnIPsecAdvancedSetting'.
    computed: true
  - model_name: type
    type: String
    value: RaVpnIPsecAdvancedSetting

  # IKEv2 Session Settings
  - model_name: identitySentToPeer
    data_path: [ikev2settings]
    tf_name: ikev2_identity_sent_to_peer
    type: String
    description: Identity sent to the peer during IKEv2 session establishment.
    enum_values: [IP_ADDRESS, HOST_NAME, AUTO_OR_DN]
    example: AUTO_OR_DN
  - model_name: enableNotificationOnTunnelDisconnect
    data_path: [ikev2settings]
    tf_name: ikev2_notification_on_tunnel_disconnect
    type: Bool
    description: Enable notification on tunnel disconnect.
    example: "true"
  - model_name: doNotRebootUntilSessionsTerminated
    data_path: [ikev2settings]
    tf_name: ikev2_do_not_reboot_until_all_sessions_are_terminated
    type: Bool
    description: Wait for all active sessions to voluntarily terminate before the system reboots.
    example: "false"

  # IKEv2 Security Association
  - model_name: cookieChallenge
    data_path: [ikev2settings]
    tf_name: ikev2_cookie_challenge
    type: String
    enum_values: [CUSTOM, ALWAYS, NEVER]
    description: Whether to send cookie challenges to peer devices in response to SA initiated packets.
    example: "true"
  - model_name: thresholdToChallengeIncomingCookies
    data_path: [ikev2settings]
    tf_name: ikev2_threshold_to_challenge_incoming_cookies
    type: Int64
    description: Percentage of the total allowed SAs that are in-negotiation.
    min_int: 1
    max_int: 1000
    example: 50
  - model_name: percentageOfSAsAllowedInNegotiation
    data_path: [ikev2settings]
    tf_name: ikev2_number_of_sas_allowed_in_negotiation
    type: Int64
    description: Limits the maximum number of SAs that can be in negotiation at any time.
    min_int: 1
    max_int: 100
    example: 90
  - model_name: maximumNumberOfSAsAllowed
    data_path: [ikev2settings]
    tf_name: ikev2_maximum_number_of_sas_allowed
    type: Int64
    description: Maximum number of Security Associations (SAs) allowed.
    example: 50

  # IPSec Settings
  # FMCBUG CSCwq59104 FMC API: /policy/ravpns/{id}/ipsecadvancedsettings endpoint does not set enableFragmentationBeforeEncryption value
  # - model_name: enableFragmentationBeforeEncryption
  #   data_path: [ipsecsettings]
  #   tf_name: ipsec_fragmentation_before_encryption
  #   type: Bool
  #   description: Enable fragmentation before encryption.
  #   example: "true"
  # - model_name: enabled
  #  data_path: [ipsecsettings, maximumTransmissionUnitAging]
  #  tf_name: ipsec_enable_path_maximum_transmission_unit_aging
  #  type: Bool
  #  description: Enable path maximum transmission unit aging.
  #  example: "false"
  - model_name: resetIntervalMinutes
    data_path: [ipsecsettings, maximumTransmissionUnitAging]
    tf_name: ipsec_path_maximum_transmission_unit_aging_reset_interval
    type: Int64
    description: >-
     Enter the number of minutes at which the Path Maximum Transission Unit (PMTU)
     value of an SA is reset to its original value.
    min_int: 10
    max_int: 30
    example: 30

  # NAT Transparency Settings
  - model_name: enabled
    data_path: [natKeepaliveMessageTraversal]
    tf_name: nat_keepalive_message_traversal
    type: Bool
    description: Enable NAT keepalive message traversal.
    example: "true"
  - model_name: intervalSeconds
    data_path: [natKeepaliveMessageTraversal]
    tf_name: nat_keepalive_message_traversal_interval
    type: Int64
    description: NAT keepalive message traversal interval in seconds.
    min_int: 10
    max_int: 3600
    example: 20

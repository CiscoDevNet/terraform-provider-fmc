# Manual resource - adjustBody
---
name: Realm AD LDAP
rest_endpoint: /api/fmc_config/v1/domain/{DOMAIN_UUID}/object/realms
doc_category: Integrations
adjust_body: true
attributes:
  - model_name: name
    type: String
    mandatory: true
    description: Name of the Realm object.
    example: my_ldap_realm
    data_source_query: true
  - model_name: enabled
    type: Bool
    description: Enable the Realm object, so it can be referenced in other objects.
    example: true
  - model_name: type
    type: String
    description: Type of the object; this value is always 'Realm'.
    computed: true
  - model_name: version
    type: String
    computed: true
    computed_body_param: true

  - model_name: description
    type: String
    description: Description of the realm.
    example: My realm
  - model_name: realmType
    type: String
    mandatory: true
    description: Type of the realm
    enum_values: ["AD", "LDAP", "LOCAL"]
    example: LDAP
    requires_replace: true

  # AD configuration
  - model_name: adPrimaryDomain
    type: String
    description: Primary domain for AD realm.
    example: example.com
    requires_replace: true
  - model_name: adJoinUsername
    type: String
    description: Username for joining the AD domain.
    example: user@example.com
  - model_name: adJoinPassword
    type: String
    description: Password for joining the AD domain.
    example: my_password
    sensitive: true
    write_only: true
  
  # Directory settings
  - model_name: dirUsername
    tf_name: directory_username
    type: String
    description: Username for joining the AD domain.
    example: user@example.com
  - model_name: dirPassword
    type: String
    tf_name: directory_password
    description: Password for the AD domain user.
    sensitive: true
    example: my_password
    write_only: true
  - model_name: baseDn
    type: String
    description: Base DN for the LDAP search.
    example: "DC=example,DC=com"
  - model_name: includedUsers
    type: List
    element_type: String
    description: List of users to include in the realm.
    example: "user1"
  - model_name: includedGroups
    type: List
    element_type: String
    description: List of groups to include in the realm.
    example: "group1"
  - model_name: excludedUsers
    type: List
    element_type: String
    description: List of users to exclude from the realm.
    example: "user2"
  - model_name: excludedGroups
    type: List
    element_type: String
    description: List of groups to exclude from the realm.
    example: "group2"
  - model_name: groupDn
    type: String
    description: DN of the group to search for users.
    example: "CN=users,DC=example,DC=com"
  - model_name: updateHour
    type: Int64
    description: Hour where the sync (download) from the directory starts.
    min_int: 0
    max_int: 23
    exclude_example: true
  - model_name: updateInterval
    type: String
    description: Interval in hours for the sync (download) from the directory.
    enum_values: [1, 2, 3, 4, 6, 8, 12, 24]
    exclude_example: true
  
  # Realm configuration
  - model_name: groupAttribute
    type: String
    description: Attribute used to identify the group in the LDAP directory. Use uniqueMember, member or any custom attribute name.
    example: member
  - model_name: authSessionTimeout
    tf_name: timeout_ise_users
    type: Int64
    description: Timeout for the authentication session in seconds.
    example: 1440
    min_int: 0
    max_int: 35791394
  - model_name: tsAgentSessionTimeout
    tf_name: timeout_terminal_server_agent_users
    type: Int64
    description: Timeout for the authentication session in seconds.
    example: 1440
    min_int: 0
    max_int: 35791394
  - model_name: activeAuthSessionTimeout
    tf_name: timeout_captive_portal_users
    type: Int64
    description: Timeout for the authentication session in seconds.
    example: 1440
    min_int: 0
    max_int: 35791394
  - model_name: failedAuthSessionTimeout
    tf_name: timeout_failed_captive_portal_users
    type: Int64
    description: Timeout for the authentication session in seconds.
    example: 1440
    min_int: 0
    max_int: 35791394
  - model_name: guestSessionTimeout
    tf_name: timeout_guest_captive_portal_users
    type: Int64
    description: Timeout for the authentication session in seconds.
    example: 1440
    min_int: 0
    max_int: 35791394

  # Directory server configuration
  - model_name: directoryConfigurations
    tf_name: directory_server_configurations
    type: List
    description: List of directory configurations for the realm.
    attributes:
      - model_name: hostname
        type: String
        description: Hostname or IP address of the LDAP server.
        example: ldap.example.com
        id: true
      - model_name: port
        type: Int64
        description: Port number for the LDAP server.
        example: 389
      - model_name: encryptionProtocol
        type: String
        description: Encryption method for the LDAP connection.
        enum_values: ["NONE", "LDAPS", "STARTTLS"]
        example: LDAPS
      - model_name: id
        data_path: ["encryptionCert"]
        tf_name: encryption_certificate
        type: String
        description: ID of the encryption certificate for LDAPS.
        example: 1234-5678-90AB-CDEF12345678
      - model_name: useRoutingToSelectInterface
        type: Bool
        description: Whether to use routing to select the interface for LDAP communication.
        example: true
      - model_name: id
        data_path: ["interface"]
        tf_name: interface_group_id
        type: String
        description: ID of the interface group to use for LDAP communication.
        example: 1234-5678-90AB-CDEF12345678
